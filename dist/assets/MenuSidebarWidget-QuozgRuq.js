var b=Object.defineProperty;var Z=(o,e,t)=>e in o?b(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var w=(o,e,t)=>Z(o,typeof e!="symbol"?e+"":e,t);import{D as E,I as L,E as v,H as g,_ as u,c as i,o as s,a as r,G as z,r as B,f as H,u as T,C as M,k as A,d as N,J as G,i as O,w as j,z as R,F as S,j as y,n as q,e as J,t as U}from"./index-DglwOhOF.js";import{B as D}from"./ButtonComponent-HQGzvG8y.js";async function F(o,e,t,a){try{return await e()}catch(c){if(c instanceof Error&&c.message.includes("HTTP 401")){const k=new E,l=localStorage.getItem("token_type"),n=localStorage.getItem("refresh_token");if(!n)throw t.logout(),a.replace("/"),c;try{const d=await k.refresh.post({refresh_token:n});if(!d.access_token)throw new Error("Invalid refresh token");localStorage.setItem("access_token",d.access_token),o.headers={...o.headers,Authorization:`${l} ${d.access_token}`}}catch(d){throw t.logout(),a.replace("/"),d}return e()}throw c}}class V extends L{constructor(t){super({url:"/user/api/v1",headers:t==null?void 0:t.headers});w(this,"services",this.requestMethods("/services",v([g.GET])));w(this,"info",this.requestMethods("/info",v([g.GET])))}routes(t){return this.requestMethods(`/services/${t}/routes`,v([g.GET]))}}const x1=Object.freeze(Object.defineProperty({__proto__:null,UserController:V},Symbol.toStringTag,{value:"Module"})),P={},W={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function Q(o,e){return s(),i("svg",W,e[0]||(e[0]=[r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 6.50012C3 3.87491 3.02811 3.00012 6.5 3.00012C9.97189 3.00012 10 3.87491 10 6.50012C10 9.12533 10.0111 10.0001 6.5 10.0001C2.98893 10.0001 3 9.12533 3 6.50012Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 6.50012C14 3.87491 14.0281 3.00012 17.5 3.00012C20.9719 3.00012 21 3.87491 21 6.50012C21 9.12533 21.0111 10.0001 17.5 10.0001C13.9889 10.0001 14 9.12533 14 6.50012Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 17.5001C3 14.8749 3.02811 14.0001 6.5 14.0001C9.97189 14.0001 10 14.8749 10 17.5001C10 20.1253 10.0111 21.0001 6.5 21.0001C2.98893 21.0001 3 20.1253 3 17.5001Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 17.5001C14 14.8749 14.0281 14.0001 17.5 14.0001C20.9719 14.0001 21 14.8749 21 17.5001C21 20.1253 21.0111 21.0001 17.5 21.0001C13.9889 21.0001 14 20.1253 14 17.5001Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const X=u(P,[["render",Q]]),Y={},K={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function e1(o,e){return s(),i("svg",K,e[0]||(e[0]=[r("path",{d:"M9.13478 20.7735V17.7157C9.13478 16.9352 9.77217 16.3024 10.5584 16.3024H13.4326C13.8102 16.3024 14.1723 16.4513 14.4393 16.7164C14.7063 16.9814 14.8563 17.3409 14.8563 17.7157V20.7735C14.8539 21.098 14.9821 21.41 15.2124 21.6403C15.4427 21.8706 15.756 22.0001 16.0829 22.0001H18.0438C18.9596 22.0025 19.8388 21.643 20.4872 21.0009C21.1356 20.3589 21.5 19.4871 21.5 18.5779V9.86698C21.5 9.13258 21.1721 8.43596 20.6046 7.96479L13.934 2.67599C12.7737 1.74868 11.1111 1.77862 9.98539 2.7471L3.46701 7.96479C2.87274 8.42207 2.51755 9.12076 2.5 9.86698V18.5691C2.5 20.464 4.04738 22.0001 5.95617 22.0001H7.87229C8.55123 22.0001 9.103 21.4563 9.10792 20.7824L9.13478 20.7735Z",fill:"currentColor"},null,-1)]))}const m=u(Y,[["render",e1]]),t1={},o1={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function r1(o,e){return s(),i("svg",o1,e[0]||(e[0]=[r("g",{transform:"rotate(-30 12 12)"},[r("path",{d:"M4.25 12.2744L19.25 12.2744",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"}),r("path",{d:"M10.2998 18.2988L4.2498 12.2748L10.2998 6.24982",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))}const I=u(t1,[["render",r1]]),n1={},s1={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function l1(o,e){return s(),i("svg",s1,e[0]||(e[0]=[z('<path d="M17.8877 10.8968C19.2827 10.7008 20.3567 9.50479 20.3597 8.05579C20.3597 6.62779 19.3187 5.44379 17.9537 5.21979" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19.7285 14.2504C21.0795 14.4524 22.0225 14.9254 22.0225 15.9004C22.0225 16.5714 21.5785 17.0074 20.8605 17.2814" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11.8867 14.6639C8.67273 14.6639 5.92773 15.1509 5.92773 17.0959C5.92773 19.0399 8.65573 19.5409 11.8867 19.5409C15.1007 19.5409 17.8447 19.0589 17.8447 17.1129C17.8447 15.1669 15.1177 14.6639 11.8867 14.6639Z" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11.8867 11.888C13.9957 11.888 15.7057 10.179 15.7057 8.069C15.7057 5.96 13.9957 4.25 11.8867 4.25C9.77766 4.25 8.06766 5.96 8.06766 8.069C8.05966 10.171 9.75666 11.881 11.8587 11.888H11.8867Z" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.88472 10.8968C4.48872 10.7008 3.41572 9.50479 3.41272 8.05579C3.41272 6.62779 4.45372 5.44379 5.81872 5.21979" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4.04388 14.2504C2.69288 14.4524 1.74988 14.9254 1.74988 15.9004C1.74988 16.5714 2.19388 17.0074 2.91188 17.2814" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>',6)]))}const i1=u(n1,[["render",l1]]),a1={},c1={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function d1(o,e){return s(),i("svg",c1,e[0]||(e[0]=[r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.21 7.89931V16.0503C21.21 19.0703 19.32 21.2003 16.3 21.2003H7.65C4.63 21.2003 2.75 19.0703 2.75 16.0503V7.89931C2.75 4.87931 4.64 2.75031 7.65 2.75031H16.3C19.32 2.75031 21.21 4.87931 21.21 7.89931Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{d:"M5.28125 16.431L6.80925 14.818C7.34025 14.255 8.22525 14.228 8.78925 14.758C8.80625 14.775 9.72625 15.71 9.72625 15.71C10.2813 16.275 11.1883 16.284 11.7533 15.73C11.7903 15.694 14.0872 12.908 14.0872 12.908C14.6792 12.189 15.7422 12.086 16.4622 12.679C16.5102 12.719 18.6803 14.946 18.6803 14.946",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3126 9.13321C10.3126 10.1022 9.52757 10.8872 8.55857 10.8872C7.58957 10.8872 6.80457 10.1022 6.80457 9.13321C6.80457 8.16421 7.58957 7.37921 8.55857 7.37921C9.52757 7.38021 10.3126 8.16421 10.3126 9.13321Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const u1=u(a1,[["render",d1]]),h1={},p1={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"};function C1(o,e){return s(),i("svg",p1,e[0]||(e[0]=[r("path",{id:"Stroke 1","fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3028 2.74994H7.65076C4.63876 2.74994 2.74976 4.88394 2.74976 7.90394V16.0499C2.74976 19.0699 4.63076 21.2039 7.65076 21.2039H16.2978C19.3228 21.2039 21.2028 19.0699 21.2028 16.0499V7.90394C21.2068 4.88394 19.3258 2.74994 16.3028 2.74994Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{id:"Stroke 3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.7031 8.78515C10.7031 9.80515 9.87711 10.6311 8.85711 10.6311C7.83811 10.6311 7.01111 9.80515 7.01111 8.78515C7.01111 7.76515 7.83811 6.93915 8.85711 6.93915C9.87611 6.94015 10.7021 7.76615 10.7031 8.78515Z",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),r("path",{id:"Stroke 5",d:"M21.207 14.9512C20.284 14.0012 18.509 12.0822 16.579 12.0822C14.648 12.0822 13.535 16.3152 11.678 16.3152C9.821 16.3152 8.134 14.4012 6.646 15.6282C5.158 16.8542 3.75 19.3612 3.75 19.3612",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const k1=u(h1,[["render",C1]]);function f1(o,e,t){const a=B(null),c=H(),k=T();return M(async()=>{const l=A(o);if(l){if(t){const n=localStorage.getItem(t);n&&(a.value=JSON.parse(n))}try{const n=await F(l,()=>e(l),k,c);a.value=n,t&&localStorage.setItem(t,JSON.stringify(n))}catch(n){console.error(n)}}}),a}const _1={class:"sidebar"},w1={class:"sidebar__logo"},v1={class:"sidebar__navigation-text"},g1=N({__name:"MenuSidebarWidget",props:{title:{},isAdmin:{type:Boolean}},setup(o){const e=o,t=H(),a=T(),c=localStorage.getItem("access_token"),k=localStorage.getItem("token_type"),l=B({navigation:[],logout:[]}),n={accounts:i1,services:m,applications:X,styles:k1,templates:u1};async function d(){await a.logout(),await t.push("/")}return M(async()=>{if(!e.title)l.value={navigation:[{href:"/services",icon:m}],logout:[{icon:I,onClick:d}]};else try{const f=new V({headers:{Authorization:`${k} ${c}`}}),_=f1(f,h=>h.routes(e.title).get().then(p=>p.items),`${e.title}_routes`);M(()=>{const h=_.value;h&&(l.value={navigation:h.map(p=>({href:`/admin/${e.title}/${p.title}`,icon:n[p.title]||m})),logout:[{icon:I,href:"/services"}]},t.currentRoute.value.path===`/admin/${e.title}`&&t.push(l.value.navigation[0].href))})}catch(f){console.error("Error an occurred while inizializating routes:",f)}}),(f,_)=>{const h=G("router-link");return s(),i("div",_1,[r("div",w1,[O(h,{to:"/",class:"sidebar__logo-title"},{default:j(()=>_[0]||(_[0]=[R(" sda ")])),_:1,__:[0]})]),(s(!0),i(S,null,y(l.value,(p,$)=>(s(),i("div",{key:$,class:q(`sidebar__${$}`)},[(s(!0),i(S,null,y(p,C=>(s(),J(D,{key:C.href,href:C.href,icon:C.icon,onClick:C.onClick},{default:j(()=>{var x;return[r("p",v1,U(C.href?(x=C.href)==null?void 0:x.split("/").filter(Boolean).pop():"logout"),1)]}),_:2},1032,["href","icon","onClick"]))),128))],2))),128))])}}}),j1=u(g1,[["__scopeId","data-v-66c413e2"]]);export{j1 as M,V as U,x1 as c,f1 as u};
