import{d as _,r as f,c as m,o as l,a as n,t as h,n as k,_ as v,u as V,b as g,e as w,w as C,f as b,g as B,h as F,i as c,F as I,j as N}from"./index-DglwOhOF.js";import{_ as S,B as $}from"./ButtonComponent-HQGzvG8y.js";import{L as A}from"./LinkIcon-CqZM9af3.js";const E={class:"form__group"},L=["for"],R=["type","id","value"],U=_({__name:"FormComponent",props:{name:{},type:{},id:{},modelValue:{},hasError:{type:Boolean}},emits:["update:modelValue"],setup(y,{expose:i,emit:d}){const a=d,t=f(null);return i({inputRef:t}),(o,u)=>(l(),m("div",E,[n("label",{for:o.id},h(o.name),9,L),n("input",{ref_key:"inputRef",ref:t,class:k(["form__group-input",{"form__group-input--error":o.hasError}]),type:o.type,id:o.id,value:o.modelValue,onInput:u[0]||(u[0]=e=>a("update:modelValue",e.target.value)),required:""},null,42,R)]))}}),z=v(U,[["__scopeId","data-v-d834b303"]]),D={key:0,class:"auth__card-error"},M=_({__name:"AuthPage",setup(y){const i=V(),d=b(),a=g({username:"",password:""}),t=f(null),o=async()=>{try{const e=await i.auth({...a});if(e!=null&&e.access_token)await d.push("/services");else if(e!=null&&e.detail){t.value=e.detail;for(const r in a)a[r]=""}}catch(e){console.error("Authorization error: ",e),t.value=(e==null?void 0:e.message)||"Network error";for(const r in a)a[r]=""}},u=[{name:"username",type:"text",id:"uname",key:"username"},{name:"password",type:"password",id:"upass",key:"password"}];return(e,r)=>(l(),w(S,{mainClass:"auth__layout"},{content:C(()=>[n("form",{class:"auth__card",onSubmit:B(o,["prevent"])},[r[1]||(r[1]=n("div",{class:"auth__card-header"},[n("h1",{class:"auth__card-header__title"},"Sign in"),n("p",{class:"auth__card-header__subtitle"},"Welcome back")],-1)),(l(),m(I,null,N(u,s=>c(z,{key:s.key,name:s.name,type:s.type,id:s.id,modelValue:a[s.key],"onUpdate:modelValue":p=>a[s.key]=p,"has-error":!!t.value,onInput:r[0]||(r[0]=p=>t.value=null)},null,8,["name","type","id","modelValue","onUpdate:modelValue","has-error"])),64)),t.value?(l(),m("div",D,h(t.value),1)):F("",!0),c($,{icon:A,type:"submit"})],32)]),_:1}))}});export{M as default};
